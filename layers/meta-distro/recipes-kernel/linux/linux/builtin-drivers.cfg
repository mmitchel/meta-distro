# Kernel configuration fragment for built-in drivers
# Forces ext4, vfat, and LVM drivers to be compiled into the kernel
# instead of as loadable modules, primarily this is for use by the initramfs

# EXT4 filesystem support (built-in)
CONFIG_EXT4_FS=y
CONFIG_EXT4_USE_FOR_EXT2=y
CONFIG_EXT4_FS_POSIX_ACL=y
CONFIG_EXT4_FS_SECURITY=y

# FAT and VFAT filesystem support (built-in)
CONFIG_FAT_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_DEFAULT_CODEPAGE=437
CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1"
CONFIG_NLS_CODEPAGE_437=y
CONFIG_NLS_ISO8859_1=y

# LVM (Device Mapper) support (built-in)
CONFIG_DM=y
CONFIG_BLK_DEV_DM_BUILTIN=y
CONFIG_DM_BUFIO=y
CONFIG_DM_SNAPSHOT=y
CONFIG_DM_MIRROR=y
CONFIG_DM_ZERO=y
CONFIG_DM_THIN_PROVISIONING=y

# Additional filesystem support for compatibility
CONFIG_EXT2_FS=n
CONFIG_EXT3_FS=n

# Device mapper crypt target
CONFIG_BLK_DEV_DM=y
CONFIG_DM_CRYPT=y

# Crypto API - required for LUKS
CONFIG_CRYPTO=y
CONFIG_CRYPTO_AES=y
CONFIG_CRYPTO_XTS=y
CONFIG_CRYPTO_SHA256=y
CONFIG_CRYPTO_USER_API_HASH=y
CONFIG_CRYPTO_USER_API_SKCIPHER=y

# Hardware crypto acceleration (optional but recommended)
CONFIG_CRYPTO_AES_NI_INTEL=y
